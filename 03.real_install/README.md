# 从零搭建k8s内网集群的实现方案

## 一、概述

### 1.1 为什么要使用k8s

容器应用的优势在于：引擎统一了基础的设施环境、统一了程序打包（装箱）的方式，也统一了部署（运行）的方式。从程序开发到上线，开发者不再关注基础环境的差异，使得开发者可以将更多的时间花在业务逻辑上。

因此，我们的目的是将部分现有应用、将来的新应用进行容器化部署。在将应用进行容器化部署之前，我们需要选择一套高效的容器编排的容器集群工具，`kubernetes`就是目前开源的、热门的、最适合的工具，没有之一。

### 1.2 集群搭建计划

目前，我们拥有3台空余的主机，我们完全可以使用这3台主机搭建一个微型的集群，用于部署测试的项目。

为了集群的稳定性、高可用性质，我们希望至少有3个控制节点，所有每一台主机都作为一个控制节点。然而，我们没有更多的主机单独作为工作节点，因此同时使用其中两台主机来做工作节点。当然，如果后续有充足的主机，也可以把工作节点迁移出去，也可以并入更多的工作节点。

介于以上目标，在下文中规划出一个合理的“微型集群”的架构。

## 二、架构

根据我们先有的资源和环境，规划出一个微型集群的架构如下图
